<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Project Euler Problem 38 &#8211; Art is Never Finished</title>
<meta name="description" content="Problem 38 is essentially just a variation on old themes: find a particular concatenated number that is pandigital when multiplied by the numbers 1, 2, …n.  You may note the similarity of the code to problem 32. Without going into detail, here is the solution:

">
<meta name="keywords" content="pandigital">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Project Euler Problem 38">
<meta name="twitter:description" content="Problem 38 is essentially just a variation on old themes: find a particular concatenated number that is pandigital when multiplied by the numbers 1, 2, …n.  You may note the similarity of the code to problem 32. Without going into detail, here is the solution:

">
<meta name="twitter:site" content="@ivarthorson">
<meta name="twitter:creator" content="@ivarthorson">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Project Euler Problem 38">
<meta property="og:description" content="Problem 38 is essentially just a variation on old themes: find a particular concatenated number that is pandigital when multiplied by the numbers 1, 2, …n.  You may note the similarity of the code to problem 32. Without going into detail, here is the solution:

">
<meta property="og:url" content="/project-euler/problem-38/">
<meta property="og:site_name" content="Art is Never Finished">





<link rel="canonical" href="/project-euler/problem-38/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Art is Never Finished Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="/assets/js/vendor/html5shiv.min.js"></script>
  <script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="/about/" >About</a></li>
		  
		    
		    <li><a href="/blog/" >Blog</a></li>
		  
		    
		    <li><a href="/project-euler/" >Code</a></li>
		  
		    
		    <li><a href="/search/" >Search</a></li>
		  
		    
		    <li><a href="/tags/" >Tags</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
      <h1 class="site-title animated fadeIn"><a href="/">Art is Never Finished</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">...Only Abandoned. – Leonardo da Vinci</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="/tags/#pandigital" title="Pages tagged pandigital">pandigital</a></li>
        </ul>
        
          <h1 class="entry-title">Project Euler Problem 38</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="/images/ivar.jpg" class="bio-photo" alt="Ivar Thorson bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Ivar Thorson</span></span>
        <span class="entry-date date published"><time datetime="2010-07-25T06:21:53-07:00"><i class="fa fa-calendar-o"></i> July 25, 2010</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p><a href="http://projecteuler.net/index.php?section=problems&amp;id=38">Problem 38</a> is essentially just a variation on old themes: find a particular concatenated number that is pandigital when multiplied by the numbers 1, 2, …n.  You may note the similarity of the code to <a href="index.php?p=310">problem 32</a>. Without going into detail, here is the solution:</p>

<pre><code><span style="color: #A8AaA5;">;; </span><span style="color: #A8AaA5;">Uses as-int from problem 37
</span>
(<span style="color: #8ae234;">defn</span> <span style="color: #edd400; font-weight: bold;">pandigital-9?</span> [a]
  (<span style="color: #729fcf;">=</span> <span style="color: #Fd7f98;">"123456789"</span> (<span style="color: #729fcf;">apply</span> str (<span style="color: #729fcf;">sort</span> (<span style="color: #729fcf;">rest</span> (.split (<span style="color: #729fcf;">str</span> a) <span style="color: #Fd7f98;">""</span>))))))

(<span style="color: #8ae234;">defn</span> <span style="color: #edd400; font-weight: bold;">multiply-and-concat</span> [num upto]
  (<span style="color: #729fcf;">apply</span> str (<span style="color: #729fcf;">map</span> #(<span style="color: #729fcf;">*</span> num %) (<span style="color: #729fcf;">range</span> 1 (<span style="color: #729fcf;">inc</span> upto)))))

(<span style="color: #8ae234;">defn</span> <span style="color: #edd400; font-weight: bold;">euler-38</span> []
  (<span style="color: #729fcf;">reduce</span> max (<span style="color: #8ae234;">for</span> [a (<span style="color: #729fcf;">range</span> 1 10000)
                    b (<span style="color: #729fcf;">range</span> 2 10)
                    c [(multiply-and-concat a b)]
                    <span style="color: #729fcf;">:when</span> (<span style="color: #729fcf;">=</span> 9 (<span style="color: #729fcf;">count</span> c))
                    <span style="color: #729fcf;">:when</span> (pandigital-9? c)]
                (as-int c))))</code></pre>

<p>Looking at Chouser’s solution on<a href="http://clojure-euler.wikispaces.com/Problem+038"> clojure-euler</a>, I did notice that he chose to use <code class="highlighter-rouge">(.length s)</code> to get the length of a string, rather than <code class="highlighter-rouge">count</code> (which works in linear time). It’s easy for me to forget that buried underneath Clojure’s sequence library there also java’s string abstraction, but I wonder if using <code class="highlighter-rouge">length</code> is really more performant here…</p>

<pre><code><span style="color: #8ae234;">user&gt; </span><span style="font-weight: bold;">(def sss (apply str (repeat 10000000 \a)))</span>
#'user/sss
<span style="color: #8ae234;">user&gt; </span><span style="font-weight: bold;">(dotimes [_ 5] (time (.length sss)))</span>
<span style="color: #Fd7f98;">"Elapsed time: 0.059609 msecs"
"Elapsed time: 0.01091 msecs"
"Elapsed time: 0.009638 msecs"
"Elapsed time: 0.00977 msecs"
"Elapsed time: 0.009879 msecs"
</span>nil
<span style="color: #8ae234;">user&gt; </span><span style="font-weight: bold;">(dotimes [_ 5] (time (count sss)))</span>
<span style="color: #Fd7f98;">"Elapsed time: 0.024554 msecs"
"Elapsed time: 0.001281 msecs"
"Elapsed time: 0.001032 msecs"
"Elapsed time: 0.001038 msecs"
"Elapsed time: 9.83E-4 msecs"
</span>nil</code></pre>

<p>For the purposes of this probably inaccurate micro-benchmark, it seems that using Clojure’s <code class="highlighter-rouge">count</code> is faster than using <code class="highlighter-rouge">length</code> However, the only conclusion I feel it is safe to draw here is that <code class="highlighter-rouge">count</code> seems to work in constant time for strings. I’m guessing that Chouser did this back in the end of 2008, when <code class="highlighter-rouge">length</code> on strings may have indeed been faster than an older, possibly linear time implementation of <code class="highlighter-rouge">count</code>. The situation now seems to be reversed.</p>

<p>Ciao for now!</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/project-euler/problem-37/" class="btn" title="Project Euler Problem 37">Previous</a>
      
      
        <a href="/project-euler/problem-39/" class="btn" title="Project Euler Problem 39">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<div>&copy; 2019 Ivar Thorson. </div>
<div class="legaltext">Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using a modified version of the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</div>
<div class="social-icons">
	<a href="https://twitter.com/ivarthorson" title="Ivar Thorson on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	
	
	
	
	<a href="https://github.com/ivarthorson" title="Ivar Thorson on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = '';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
